<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/icons/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes" />
    <meta http-equiv="content-language" content="en" />
    <link rel="alternate" hreflang="en" href="https://jfiftojpg.site/" />
    <link rel="alternate" hreflang="x-default" href="https://jfiftojpg.site/" />

    <!-- Performance optimizations -->
    <link rel="dns-prefetch" href="//jfiftojpg.site" />
    <link rel="dns-prefetch" href="//api.jfiftojpg.site" />

    <!-- Primary Meta Tags -->
    <title>JFIF to JPG Converter Online | Free Image Format Converter</title>
    <meta name="description" content="Free online JFIF to JPG converter with batch processing, quality adjustment, and size customization. Drag & drop upload, convert JFIF, PNG, WebP, BMP, GIF formats instantly. Fast, secure, no registration required." />
    <meta name="robots" content="index, follow" />

    <!-- Canonical -->
    <link rel="canonical" href="https://jfiftojpg.site/" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="JFIF to JPG Converter Online | Free Image Format Converter" />
    <meta property="og:description" content="Free online JFIF to JPG converter with batch processing, quality adjustment, and size customization. Drag & drop upload, convert JFIF, PNG, WebP, BMP, GIF formats instantly. Fast, secure, no registration required." />
    <meta property="og:url" content="https://jfiftojpg.site/" />
    <meta property="og:site_name" content="JFIF to JPG Converter" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="JFIF to JPG Converter Online | Free Image Format Converter" />
    <meta name="twitter:description" content="Free online JFIF to JPG converter with batch processing, quality adjustment, and size customization. Drag & drop upload, convert JFIF, PNG, WebP, BMP, GIF formats instantly. Fast, secure, no registration required." />

    <!-- PWA Colors -->
    <meta name="theme-color" content="#1d4ed8" />

    <!-- Google Analytics - 异步加载，不影响页面性能 -->
    <!-- 注意：GA脚本将在运行时根据环境变量决定是否加载 -->
    <script>
      // 环境检测和GA脚本动态加载
      (function() {
        // 检查是否为生产环境
        const isProd = window.location.hostname !== 'localhost' && 
                      window.location.hostname !== '127.0.0.1' &&
                      !window.location.hostname.includes('dev');
        
        if (isProd) {
          // 生产环境：加载GA脚本
          const gaScript = document.createElement('script');
          gaScript.async = true;
          gaScript.src = 'https://www.googletagmanager.com/gtag/js?id=G-SPSFBHX4VH';
          document.head.appendChild(gaScript);
          
          // 初始化GA
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-SPSFBHX4VH');
        }
      })();
    </script>

    <!-- JSON-LD Structured Data -->  
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "JFIF to JPG Converter Online",
      "url": "https://jfiftojpg.site/",
      "applicationCategory": "Multimedia",
      "operatingSystem": "Any",
      "description": "Free online JFIF to JPG converter with batch processing, quality adjustment, and size customization. Drag & drop upload, convert JFIF, PNG, WebP, BMP, GIF formats instantly. Fast, secure, no registration required.",
      "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" }
    }
    </script>
  </head>
  <body>
    <div id="scale-root"><div id="root"></div></div>
    <script>
      (function() {
        const DESIGN_WIDTH = 1200; // 与桌面布局一致的设计宽度
        let resizeTimer = null;
        let lastWidth = 0;
        
        function applyScale() {
          const el = document.getElementById('scale-root');
          if (!el) return;
          const vw = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
          
          // 避免重复计算相同宽度
          if (vw === lastWidth) return;
          lastWidth = vw;
          
          const scale = Math.min(1, vw / DESIGN_WIDTH);

          // 桌面端（scale===1）不进行 transform/height 设置，避免双滚动条
          if (scale === 1) {
            el.style.transform = '';
            el.style.width = DESIGN_WIDTH + 'px';
            el.style.margin = '0 auto';
            el.style.height = '';
            return;
          }

          // 移动端（scale<1）进行等比缩放
          el.style.transform = 'scale(' + scale + ')';
          el.style.transformOrigin = 'top left';
          el.style.width = DESIGN_WIDTH + 'px';
          el.style.margin = '0 auto';

          const rootEl = document.getElementById('root');
          if (rootEl && rootEl.scrollHeight > 0) {
            const contentHeight = rootEl.scrollHeight;
            el.style.height = (contentHeight * scale) + 'px';
          }
        }
        
        function throttledApplyScale() {
          if (resizeTimer) return;
          resizeTimer = requestAnimationFrame(() => {
            applyScale();
            resizeTimer = null;
          });
        }
        
        // 等待 React 应用完全加载后再执行缩放
        function waitForReactApp() {
          const rootEl = document.getElementById('root');
          if (rootEl && rootEl.children.length > 0) {
            // React 应用已加载，等待一下确保渲染完成
            setTimeout(() => {
              applyScale();
              // 再次检查，确保高度正确
              setTimeout(applyScale, 500);
            }, 200);
          } else {
            // 继续等待
            setTimeout(waitForReactApp, 100);
          }
        }
        
        // 初始执行
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', waitForReactApp);
        } else {
          waitForReactApp();
        }
        
        // 额外监听：确保在页面完全稳定后再次应用缩放
        window.addEventListener('load', () => {
          setTimeout(applyScale, 1000);
        });
        
        // 节流的事件监听
        window.addEventListener('resize', throttledApplyScale, { passive: true });
        window.addEventListener('orientationchange', throttledApplyScale, { passive: true });
      })();
    </script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
