<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/icons/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes" />

    <!-- Performance optimizations -->
    <link rel="dns-prefetch" href="//jfiftojpg.site" />
    <link rel="dns-prefetch" href="//api.jfiftojpg.site" />

    <!-- Primary Meta Tags -->
    <title>JFIF to JPG 在线转换器 | JFIF转JPG工具站</title>
    <meta name="description" content="免费在线JFIF转JPG转换器，支持批量转换、质量调节、尺寸调整。拖拽上传，一键转换JFIF、PNG、WebP、BMP、GIF等格式，快速安全无需注册。" />
    <meta name="robots" content="index, follow" />

    <!-- Canonical -->
    <link rel="canonical" href="https://jfiftojpg.site/" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="JFIF to JPG 在线转换器" />
    <meta property="og:description" content="免费在线JFIF转JPG转换器，支持批量转换、质量调节、尺寸调整。拖拽上传，一键转换JFIF、PNG、WebP、BMP、GIF等格式，快速安全无需注册。" />
    <meta property="og:url" content="https://jfiftojpg.site/" />
    <meta property="og:site_name" content="JFIF转JPG工具站" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="JFIF to JPG 在线转换器" />
    <meta name="twitter:description" content="免费在线JFIF转JPG转换器，支持批量转换、质量调节、尺寸调整。拖拽上传，一键转换JFIF、PNG、WebP、BMP、GIF等格式，快速安全无需注册。" />

    <!-- PWA Colors -->
    <meta name="theme-color" content="#1d4ed8" />

    <!-- Google Analytics - 异步加载，不影响页面性能 -->
    <!-- 注意：GA脚本将在运行时根据环境变量决定是否加载 -->
    <script>
      // 环境检测和GA脚本动态加载
      (function() {
        // 检查是否为生产环境
        const isProd = window.location.hostname !== 'localhost' && 
                      window.location.hostname !== '127.0.0.1' &&
                      !window.location.hostname.includes('dev');
        
        if (isProd) {
          // 生产环境：加载GA脚本
          const gaScript = document.createElement('script');
          gaScript.async = true;
          gaScript.src = 'https://www.googletagmanager.com/gtag/js?id=G-SPSFBHX4VH';
          document.head.appendChild(gaScript);
          
          // 初始化GA
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-SPSFBHX4VH');
        }
      })();
    </script>

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "JFIF to JPG 在线转换器",
      "url": "https://jfiftojpg.site/",
      "applicationCategory": "Multimedia",
      "operatingSystem": "Any",
      "description": "免费在线JFIF转JPG转换器，支持批量转换、质量调节、尺寸调整。拖拽上传，一键转换JFIF、PNG、WebP、BMP、GIF等格式，快速安全无需注册。",
      "offers": { "@type": "Offer", "price": "0", "priceCurrency": "CNY" }
    }
    </script>
  </head>
  <body>
    <div id="scale-root"><div id="root"></div></div>
    <script>
      (function() {
        const DESIGN_WIDTH = 1200; // 与桌面布局一致的设计宽度
        let resizeTimer = null;
        let lastWidth = 0;
        
        function applyScale() {
          const el = document.getElementById('scale-root');
          if (!el) return;
          const vw = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
          
          // 避免重复计算相同宽度
          if (vw === lastWidth) return;
          lastWidth = vw;
          
          const scale = Math.min(1, vw / DESIGN_WIDTH);
          el.style.transform = 'scale(' + scale + ')';
          el.style.transformOrigin = 'top left';
          el.style.width = DESIGN_WIDTH + 'px';
          el.style.height = 'auto';
          el.style.margin = '0 auto';
          
          // 修复滚动问题：确保容器高度正确
          if (scale < 1) {
            const rootEl = document.getElementById('root');
            if (rootEl) {
              const contentHeight = rootEl.scrollHeight;
              el.style.height = (contentHeight * scale) + 'px';
            }
          }
        }
        
        function throttledApplyScale() {
          if (resizeTimer) return;
          resizeTimer = requestAnimationFrame(() => {
            applyScale();
            resizeTimer = null;
          });
        }
        
        // 初始执行
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', applyScale);
        } else {
          applyScale();
        }
        
        // 节流的事件监听
        window.addEventListener('resize', throttledApplyScale, { passive: true });
        window.addEventListener('orientationchange', throttledApplyScale, { passive: true });
      })();
    </script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
